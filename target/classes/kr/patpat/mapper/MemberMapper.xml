<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.patpat.mapper.MemberMapper">

	<resultMap type="kr.patpat.entity.Member" id="member">
		<result property="mbIdx" column="mb_idx"/>
		<result property="mbToken" column="mb_token"/>
		<result property="mbName" column="mb_name"/>
		<result property="mbNick" column="mb_nick"/>
		<result property="mbEmail" column="mb_email"/>
		<result property="mbPhone" column="mb_phone"/>
		<result property="mbProfile" column="mb_profile"/>
		<result property="mbAlarm" column="mb_alarm"/>
		<result property="mbJoinAt" column="mb_join_at"/>
		<result property="mbUpdateAt" column="mb_update_at"/>
		<result property="adminYn" column="admin_yn"/>
	</resultMap>
	
   <insert id="join" parameterType="java.util.HashMap">
		INSERT INTO t_member (mb_token, mb_name, mb_nick, mb_email, mb_phone, mb_profile, mb_join_at, mb_update_at, admin_yn) 
		VALUES ('1', '1', #{nickname}, #{email}, '01012345678', '1', '24', NOW(), NOW(), 'N');
   </insert>
   
   <select id="selectMember" parameterType="java.util.HashMap" resultMap="member">
		select * from t_member where mb_email=#{email}
   </select>
   
   <update id="setAlarm" parameterType="java.util.HashMap">
   		update t_member set mb_alarm=#{mbAlarm} where mb_idx=#{mbIdx}
   </update>
   
	<insert id="setPet" parameterType="java.util.HashMap">
		insert into t_pet(pet_name, pet_adoption_at, pet_photo, mb_idx, pet_gender) 
		values(#{pet_name), #{pet_adoption_at}, #{pet_photo}, #{mb_idx}, #{pet_gender})
		where mb_idx = #{mbIdx};
	</insert>
</mapper>